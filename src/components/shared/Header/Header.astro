---
import HeaderGetEmojiDropdown from '../GetEmojiDropdown/GetEmojiDropdown.astro';
import githubLogo from './assets/github_hi.svg';
import twitterLogo from './assets/twitter_hi.svg';

const {theme} = Astro.props || 'default';
const {color} = Astro.props || 'default';
const {selected} = Astro.props;

let currentPage = String(Astro.request.url);
/* Dirty way to transfrom "http://localhost:3000/about" to "/about" */
currentPage = currentPage.replace('//','');
currentPage = currentPage.split('/');
currentPage.shift();
currentPage = '/' + currentPage.join('/');


const menuItems = [
  {
    "text": "OpenMoji",
    "href": "/"
  },
  {
    "text": "Library",
    "href": "/library"
  },
  {
    "text": "Participate",
    "href": "/styleguide"
  },
  {
    "text": "Samples",
    "href": "/samples"
  },
  {
    "text": "FAQ",
    "href": "/faq"
  },
  {
    "text": "About",
    "href": "/about"
  }
]
---
<header class={"page-header " + theme + " " + color}>
  <style lang="scss">
    @use './_header.scss';
  </style>
  <a class="project-name" href="../">
    <h2>OpenMoji</h2>
  </a>
  <nav class="menu">
    <ul>
      {menuItems.map((menuItem) => {
        if(currentPage === menuItem.href){
          return (<li class="active-tab"><a href={menuItem.href}>{menuItem.text}</a></li>)  
        }else{
          return (<li><a href={menuItem.href}>{menuItem.text}</a></li>)  
        }
        
      })}
    </ul>
    <div class="github-link">
      <a
        class="gh-link iconlink"
        rel="noopener"
        href="https://github.com/hfg-gmuend/openmoji"
        target="_blank">
        <img src={githubLogo} alt="GitHub logo"/>
      </a>
      <a
        class="iconlink"
        rel="noopener"
        href="https://twitter.com/OpenMoji"
        target="_blank">
          <img src={twitterLogo} alt="Twitter logo" />
      </a>
    </div>
  </nav>
  <div class="actions">
    <div class="mobile-toggle"></div>
    <div class="action-links">
      <a
        class="gh-link iconlink"
        rel="noopener"
        href="https://github.com/hfg-gmuend/openmoji"
        target="_blank">
        <img src={githubLogo} alt="GitHub logo"/>
      </a>
      <a
        class="iconlink"
        rel="noopener"
        href="https://twitter.com/OpenMoji"
        target="_blank">
        <img src={twitterLogo} alt="Twitter logo" />
      </a>
      <HeaderGetEmojiDropdown/>
    </div>
  </div>
</header>